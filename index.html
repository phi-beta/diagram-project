<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>Diagram Project</title>
  <link rel="stylesheet" href="themes/default.css?v=006" id="theme-link">
</head>
<body>
  <button id="theme-toggle">Toggle Theme</button>
  <button id="download-svg">Download SVG</button>
  <button id="download-png">Download PNG</button>
  <div id="viewport-indicators">
    <div id="zoom-level">100%</div>
    <div id="coordinates">0, 0</div>
    <button id="reset-view">Reset View</button>
  </div>
  <svg id="diagram" width="800" height="600" viewBox="0 0 800 600">
    <!-- Layer 0: Background -->
    <g id="background-layer" class="layer">
      <rect width="100%" height="100%" fill="var(--background-color, #fafafa)"/>
    </g>
    
    <!-- Layer 1: Grid -->
    <g id="grid-layer" class="layer">
      <defs>
        <pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse">
          <path d="M 20 0 L 0 0 0 20" fill="none" stroke="var(--grid-color, #e0e0e0)" stroke-width="1"/>
        </pattern>
        <marker id="arrowhead" markerWidth="10" markerHeight="7" 
                refX="9" refY="3.5" orient="auto">
          <polygon points="0 0, 10 3.5, 0 7" fill="var(--edge-color, #666)"/>
        </marker>
      </defs>
      <rect width="100%" height="100%" fill="url(#grid)"/>
    </g>
    
    <!-- Layer 2: Edges (behind nodes) -->
    <g id="edges-layer" class="layer">
      <!-- All edges will be added here -->
    </g>
    
    <!-- Layer 3: Nodes -->
    <g id="nodes-layer" class="layer">
      <!-- All nodes will be added here -->
    </g>
    
    <!-- Layer 4: Temporary Elements -->
    <g id="temp-layer" class="layer">
      <!-- Temporary edges, selection boxes, etc. -->
    </g>
    
    <!-- Layer 5: UI Overlays -->
    <g id="ui-layer" class="layer">
      <!-- Context menus, tooltips, controls -->
    </g>
    
    <!-- Layer 6: Debug (when enabled) -->
    <g id="debug-layer" class="layer">
      <!-- Debug information, coordinate displays, etc. -->
    </g>
  </svg>
  <script type="module" src="js/debug.js"></script>
  <script>
    // Enable debug mode for development
    window.DEBUG_MODE = true;
    window.DEBUG_CONFIG = {
      INTERACTION: true,
      EDGE_CREATION: true,
      NODE_EVENTS: true,
      DRAG_MANAGER: true,
      RENDERER: true,
      KEYBOARD: true,
      MOUSE: true
    };
  </script>    <script type="module" src="js/renderer.js?v=108"></script>
</body>
</html>
